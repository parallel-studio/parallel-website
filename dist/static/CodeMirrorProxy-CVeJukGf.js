const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/index-Bbb7XC2E.js","static/index-tsls0F8k.js","static/index-DP7f2_S6.js","static/sanity-BYj2qZlT.js","static/index-Cg_fJxfY.js","static/index-DB7Hu5iT.js","static/index-DH_wraPT.js","static/index-llx3KfBv.js","static/index-COcV1sSU.js","static/index-Bwa3L5zk.js","static/sass-BR7ksiGk.js","static/css-Bt2UjfAg.js"])))=>i.map(i=>d[i]);
import{r as l,u as C,j as q,f as A,h as m,i as G,k as J,_ as c}from"./sanity-BYj2qZlT.js";import{E as h,H as W,s as Q,S as K,R as U,t as i,l as X,a as I,D as _,b as u}from"./index-DP7f2_S6.js";var Y=e=>{var{theme:o,settings:t={},styles:r=[]}=e,n={".cm-gutters":{}},a={};t.background&&(a.backgroundColor=t.background),t.backgroundImage&&(a.backgroundImage=t.backgroundImage),t.foreground&&(a.color=t.foreground),t.fontSize&&(a.fontSize=t.fontSize),(t.background||t.foreground)&&(n["&"]=a),t.fontFamily&&(n["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(n[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(n[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(n[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(n[".cm-content"]={caretColor:t.caret},n[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var s={};t.gutterActiveForeground&&(s.color=t.gutterActiveForeground),t.lineHighlight&&(n[".cm-activeLine"]={backgroundColor:t.lineHighlight},s.backgroundColor=t.lineHighlight),n[".cm-activeLineGutter"]=s,t.selection&&(n["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(n["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var d=h.theme(n,{dark:o==="dark"}),g=W.define(r),y=[d,Q(g)];return y};const Z=[{name:"groq",loader:()=>c(async()=>{const{javascriptLanguage:e}=await import("./index-Bbb7XC2E.js");return{javascriptLanguage:e}},__vite__mapDeps([0,1,2,3])).then(({javascriptLanguage:e})=>e)},{name:"javascript",loader:()=>c(async()=>{const{javascript:e}=await import("./index-Bbb7XC2E.js");return{javascript:e}},__vite__mapDeps([0,1,2,3])).then(({javascript:e})=>e({jsx:!1}))},{name:"jsx",loader:()=>c(async()=>{const{javascript:e}=await import("./index-Bbb7XC2E.js");return{javascript:e}},__vite__mapDeps([0,1,2,3])).then(({javascript:e})=>e({jsx:!0}))},{name:"typescript",loader:()=>c(async()=>{const{javascript:e}=await import("./index-Bbb7XC2E.js");return{javascript:e}},__vite__mapDeps([0,1,2,3])).then(({javascript:e})=>e({jsx:!1,typescript:!0}))},{name:"tsx",loader:()=>c(async()=>{const{javascript:e}=await import("./index-Bbb7XC2E.js");return{javascript:e}},__vite__mapDeps([0,1,2,3])).then(({javascript:e})=>e({jsx:!0,typescript:!0}))},{name:"php",loader:()=>c(async()=>{const{php:e}=await import("./index-Cg_fJxfY.js");return{php:e}},__vite__mapDeps([4,1,2,3,5,0])).then(({php:e})=>e())},{name:"sql",loader:()=>c(async()=>{const{sql:e}=await import("./index-DH_wraPT.js");return{sql:e}},__vite__mapDeps([6,2,3,1])).then(({sql:e})=>e())},{name:"mysql",loader:()=>c(async()=>{const{sql:e,MySQL:o}=await import("./index-DH_wraPT.js");return{sql:e,MySQL:o}},__vite__mapDeps([6,2,3,1])).then(({sql:e,MySQL:o})=>e({dialect:o}))},{name:"json",loader:()=>c(async()=>{const{json:e}=await import("./index-llx3KfBv.js");return{json:e}},__vite__mapDeps([7,1,2,3])).then(({json:e})=>e())},{name:"markdown",loader:()=>c(async()=>{const{markdown:e}=await import("./index-COcV1sSU.js");return{markdown:e}},__vite__mapDeps([8,2,3,5,1,0])).then(({markdown:e})=>e())},{name:"java",loader:()=>c(async()=>{const{java:e}=await import("./index-Bwa3L5zk.js");return{java:e}},__vite__mapDeps([9,1,2,3])).then(({java:e})=>e())},{name:"html",loader:()=>c(async()=>{const{html:e}=await import("./index-DB7Hu5iT.js");return{html:e}},__vite__mapDeps([5,1,2,3,0])).then(({html:e})=>e())},{name:"csharp",loader:()=>c(async()=>{const{csharp:e}=await import("./clike-ZQV1NlO2.js");return{csharp:e}},[]).then(({csharp:e})=>u.define(e))},{name:"sh",loader:()=>c(async()=>{const{shell:e}=await import("./shell-CjFT_Tl9.js");return{shell:e}},[]).then(({shell:e})=>u.define(e))},{name:"css",loader:()=>c(async()=>{const{css:e}=await import("./css-Bt2UjfAg.js");return{css:e}},[]).then(({css:e})=>u.define(e))},{name:"scss",loader:()=>c(async()=>{const{css:e}=await import("./css-Bt2UjfAg.js");return{css:e}},[]).then(({css:e})=>u.define(e))},{name:"sass",loader:()=>c(async()=>{const{sass:e}=await import("./sass-BR7ksiGk.js");return{sass:e}},__vite__mapDeps([10,11])).then(({sass:e})=>u.define(e))},{name:"ruby",loader:()=>c(async()=>{const{ruby:e}=await import("./ruby-B2Rjki9n.js");return{ruby:e}},[]).then(({ruby:e})=>u.define(e))},{name:"python",loader:()=>c(async()=>{const{python:e}=await import("./python-jWMSN8OU.js");return{python:e}},[]).then(({python:e})=>u.define(e))},{name:"xml",loader:()=>c(async()=>{const{xml:e}=await import("./xml-BFMHta2a.js");return{xml:e}},[]).then(({xml:e})=>u.define(e))},{name:"yaml",loader:()=>c(async()=>{const{yaml:e}=await import("./yaml-DsCXHVTH.js");return{yaml:e}},[]).then(({yaml:e})=>u.define(e))},{name:"golang",loader:()=>c(async()=>{const{go:e}=await import("./go-CTD25R5P.js");return{go:e}},[]).then(({go:e})=>u.define(e))},{name:"text",loader:()=>{}},{name:"batch",loader:()=>{}}];function D(e){return e.tone!=="neutral"&&e.tone!=="suggest"?e.tone:e.tone==="neutral"?"default":"primary"}const p="cm-highlight-line",x=I.define(),O=I.define(),k=K.define({create(){return _.none},update(e,o){e=e.map(o.changes);for(const t of o.effects)t.is(x)&&(e=e.update({add:[R.range(t.value)]})),t.is(O)&&(e=e.update({filter:r=>r!==t.value}));return e},toJSON(e,o){const t=[],r=e.iter();for(;r.value;){const n=o.doc.lineAt(r.from).number;t.includes(n)||t.push(n),r.next()}return t},fromJSON(e,o){const t=o.doc.lines,r=e.filter(n=>n<=t).map(n=>R.range(o.doc.line(n).from));r.sort((n,a)=>n.from-a.from);try{return _.none.update({add:r})}catch(n){return console.error(n),_.none}},provide:e=>h.decorations.from(e)}),R=_.line({class:p}),M={highlight:k};function ee(e){const{themeCtx:o}=e,t=D(o),r={color:o.theme.color.dark[t]},n={color:o.theme.color.light[t]};return h.baseTheme({".cm-lineNumbers":{cursor:"default"},".cm-line.cm-line":{position:"relative"},[`.${p}::before`]:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:-3,content:"''",boxSizing:"border-box"},[`&dark .${p}::before`]:{background:m(r.color.muted.caution.pressed.bg,.5)},[`&light .${p}::before`]:{background:m(n.color.muted.caution.pressed.bg,.75)}})}const te=e=>{const o=ee({themeCtx:e.theme});return[k,e.readOnly?[]:X({domEventHandlers:{mousedown:(t,r)=>{const n=t.state.doc.lineAt(r.from);let a=!1;return t.state.field(k).between(n.from,n.to,(s,d,g)=>{if(g)return a=!0,!1}),a?t.dispatch({effects:O.of(n.from)}):t.dispatch({effects:x.of(n.from)}),e!=null&&e.onHighlightChange&&e.onHighlightChange(t.state.toJSON(M).highlight),!0}}}),o]};function oe(e,o){const t=e.state.doc,r=t.lines,n=Array.from({length:r},(a,s)=>s+1);e.dispatch({effects:n.map(a=>{const s=t.line(a);return o!=null&&o.includes(a)?x.of(s.from):O.of(s.from)})})}function re(){const e=C();return l.useMemo(()=>{const o=D(e),t={color:e.theme.color.dark[o]},r={color:e.theme.color.light[o]};return h.baseTheme({"&.cm-editor":{height:"100%"},"&.cm-editor.cm-focused":{outline:"none"},"&.cm-editor.cm-focused .cm-matchingBracket":{backgroundColor:"transparent"},"&.cm-editor.cm-focused .cm-nonmatchingBracket":{backgroundColor:"transparent"},"&dark.cm-editor.cm-focused .cm-matchingBracket":{outline:`1px solid ${t.color.base.border}`},"&dark.cm-editor.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${t.color.base.border}`},"&light.cm-editor.cm-focused .cm-matchingBracket":{outline:`1px solid ${r.color.base.border}`},"&light.cm-editor.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${r.color.base.border}`},"& .cm-lineNumbers .cm-gutterElement":{minWidth:"32px !important",padding:"0 8px !important"},"& .cm-gutter.cm-foldGutter":{width:"0px !important"},"&dark .cm-gutters":{color:`${m(t.color.card.enabled.code.fg,.5)} !important`,borderRight:`1px solid ${m(t.color.base.border,.5)}`},"&light .cm-gutters":{color:`${m(r.color.card.enabled.code.fg,.5)} !important`,borderRight:`1px solid ${m(r.color.base.border,.5)}`}})},[e])}function ne(){const e=A();return l.useMemo(()=>{const{code:o}=e.sanity.fonts,{base:t,card:r,dark:n,syntax:a}=e.sanity.color;return Y({theme:n?"dark":"light",settings:{background:r.enabled.bg,foreground:r.enabled.code.fg,lineHighlight:r.enabled.bg,fontFamily:o.family,caret:t.focusRing,selection:m(t.focusRing,.2),selectionMatch:m(t.focusRing,.4),gutterBackground:r.disabled.bg,gutterForeground:r.disabled.code.fg,gutterActiveForeground:r.enabled.fg},styles:[{tag:[i.heading,i.heading2,i.heading3,i.heading4,i.heading5,i.heading6],color:r.enabled.fg},{tag:i.angleBracket,color:r.enabled.code.fg},{tag:i.atom,color:a.keyword},{tag:i.attributeName,color:a.attrName},{tag:i.bool,color:a.boolean},{tag:i.bracket,color:r.enabled.code.fg},{tag:i.className,color:a.className},{tag:i.comment,color:a.comment},{tag:i.definition(i.typeName),color:a.function},{tag:[i.definition(i.variableName),i.function(i.variableName),i.className,i.attributeName],color:a.function},{tag:[i.function(i.propertyName),i.propertyName],color:a.function},{tag:i.keyword,color:a.keyword},{tag:i.null,color:a.number},{tag:i.number,color:a.number},{tag:i.meta,color:r.enabled.code.fg},{tag:i.operator,color:a.operator},{tag:i.propertyName,color:a.property},{tag:[i.string,i.special(i.brace)],color:a.string},{tag:i.tagName,color:a.className},{tag:i.typeName,color:a.keyword}]})},[e])}function ae(e){const{fontSize:o}=e,t=A();return l.useMemo(()=>{const{code:r}=t.sanity.fonts,{fontSize:n,lineHeight:a}=r.sizes[o]||r.sizes[2];return h.baseTheme({"&":{fontSize:G(n)},"& .cm-scroller":{lineHeight:`${a/n} !important`}})},[o,t])}var ie=Object.defineProperty,ce=Object.defineProperties,se=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,S=(e,o,t)=>o in e?ie(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,le=(e,o)=>{for(var t in o||(o={}))j.call(o,t)&&S(e,t,o[t]);if(b)for(var t of b(o))N.call(o,t)&&S(e,t,o[t]);return e},de=(e,o)=>ce(e,se(o)),ue=(e,o)=>{var t={};for(var r in e)j.call(e,r)&&o.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&b)for(var r of b(e))o.indexOf(r)<0&&N.call(e,r)&&(t[r]=e[r]);return t};const fe=l.forwardRef(function(e,o){const t=e,{basicSetup:r,highlightLines:n,languageMode:a,onHighlightChange:s,readOnly:d,value:g}=t,y=ue(t,["basicSetup","highlightLines","languageMode","onHighlightChange","readOnly","value"]),L=C(),V=ne(),[E,H]=l.useState(void 0),w=re(),P=ae({fontSize:1}),v=ge(a),T=l.useMemo(()=>te({onHighlightChange:s,readOnly:d,theme:L}),[s,d,L]),F=l.useMemo(()=>{const f=[w,P,T,h.lineWrapping];return v?[...f,v]:f},[P,T,v,w]);l.useEffect(()=>{E&&oe(E,n??[])},[E,n,g]);const B=l.useMemo(()=>({json:{doc:g??"",selection:{main:0,ranges:[{anchor:0,head:0}]},highlight:n??[]},fields:M}),[]),z=l.useCallback(f=>{H(f)},[]),$=l.useMemo(()=>r??{highlightActiveLine:!1},[r]);return q.jsx(U,de(le({},y),{value:g,ref:o,extensions:F,theme:V,onCreateEditor:z,initialState:B,basicSetup:$}))});function ge(e){const o=l.useContext(J),[t,r]=l.useState();return l.useEffect(()=>{var n;const a=[...(n=o==null?void 0:o.codeModes)!=null?n:[],...Z].find(d=>d.name===e);a!=null&&a.loader||console.warn(`Found no codeMode for language mode ${e}, syntax highlighting will be disabled.`);let s=!0;return Promise.resolve(a==null?void 0:a.loader()).then(d=>{s&&r(d)}).catch(d=>{console.error(`Failed to load language mode ${e}`,d),s&&r(void 0)}),()=>{s=!1}},[e,o]),t}export{fe as default};
